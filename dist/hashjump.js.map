{"version":3,"file":"hashjump.js","sources":["../src/hashjump.js"],"sourcesContent":["/*!\n  HashJump v0.1.0 (https://hashjump.js.org)\n  by Five Fifteen (https://fivefifteen.com)\n*/\n\nconst hashjump = (targetHashes, opts) => {\n  const onLoadHash = (window.location.hash).replace('#', '')\n\n  if (typeof targetHashes === 'object') {\n    opts = targetHashes\n    targetHashes = null\n  } else if (typeof targetHashes === 'string') {\n    targetHashes = targetHashes.split(/[\\s,]+/)\n  }\n\n  opts = Object.assign({}, hashjump.defaultOpts, opts ?? {})\n\n  if (\n    opts.hashjumpOnLoad &&\n    onLoadHash &&\n    (\n      (!targetHashes && !Object.keys(hashjump.opts ?? {}).includes(onLoadHash)) ||\n      (targetHashes && targetHashes.includes(onLoadHash))\n    )\n  ) {\n    if ('scrollRestoration' in history) {\n      history.scrollRestoration = 'manual'\n    }\n\n    window.scrollTo(0, 0)\n\n    if (opts.hideUrlHash || (opts.ignoreEmptyHashes && !onLoadHash)) {\n      history.replaceState(null, null, window.location.pathname)\n    }\n\n    if (!opts.ignoreEmptyHashes || onLoadHash) {\n      window.addEventListener('load', () => {\n        hashjump.to(onLoadHash, Object.assign({ isOnLoad: true }, opts))\n      })\n    }\n  }\n\n  if (opts.hashjumpLinks) {\n    let query\n\n    if (targetHashes) {\n      query = targetHashes.map(hash => 'a[href=\"#' + hash + '\"]').join(',')\n    } else {\n      query = 'a[href^=\"#\"]' + Object.keys(hashjump.opts ?? {}).map(hash => ':not([href=\"#' + hash + '\"])').join('')\n    }\n\n    const hashLinks = document.querySelectorAll(query)\n\n    hashLinks.forEach(link => {\n      opts.hashjumpLinkEvents.forEach(eventType => {\n        link.addEventListener(eventType, e => {\n          const linkHash = link.getAttribute('href').replace('#', '')\n\n          if (opts.hideUrlHash || (opts.ignoreEmptyHashes && !linkHash)) {\n            e.preventDefault()\n            history.replaceState(null, null, window.location.pathname)\n          }\n\n          if (!opts.ignoreEmptyHashes || linkHash) {\n            hashjump.to(linkHash, Object.assign({ isOnClick: true }, opts))\n          }\n        })\n      })\n    })\n  }\n\n  if (targetHashes) {\n    hashjump.opts = Object.assign(hashjump.opts ?? {}, targetHashes.reduce((a, v) => ({ ...a, [v]: opts }), {}))\n  } else {\n    hashjump.baseOpts = opts\n  }\n}\n\nhashjump.to = (target, opts) => {\n  let element\n\n  if (typeof target === 'object' && !(target instanceof HTMLElement)) {\n    opts = target\n    target = null\n  }\n\n  if (!target) {\n    element = document.documentElement\n  } else if (target instanceof HTMLElement) {\n    element = target\n  } else if (typeof target === 'string') {\n    element = document.getElementById(target)\n  } else {\n    console.error('[hashjump] invalid target:', target)\n    return\n  }\n\n  if (!element) {\n    if (opts.action) {\n      element = document.documentElement\n    } else {\n      console.warn('[hashjump] could not find element:', target)\n      return\n    }\n  }\n\n  const id = typeof target === 'string' ? target : element.id\n\n  opts = Object.assign({}, (hashjump.opts ? hashjump.opts[id] : null) ?? hashjump.baseOpts ?? hashjump.defaultOpts, opts ?? {})\n\n  const viewWidth = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)\n  const viewHeight = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)\n  const pageWidth = document.documentElement.scrollWidth\n  const pageHeight = document.documentElement.scrollHeight\n  const maxScrollX = pageWidth - viewWidth\n  const maxScrollY = pageHeight - viewHeight\n  const elementPosX = element.offsetLeft\n  const elementPosY = element.offsetTop\n  const elementWidth = element.offsetWidth\n  const elementHeight = element.offsetHeight\n\n  let scrollOffsetX = opts.scrollOffsetX ?? opts.scrollOffset\n  let scrollOffsetY = opts.scrollOffsetY ?? opts.scrollOffset\n\n  if (typeof scrollOffsetX === 'string') {\n    if (scrollOffsetX.startsWith('inner-')) {\n      if (scrollOffsetX.charAt(scrollOffsetX.length - 1) === '%') {\n        scrollOffsetX = ((Number(scrollOffsetX.slice(6, -1)) / 100) * (viewWidth - elementWidth))\n      } else {\n        scrollOffsetX = -Number(scrollOffsetX.slice(6))\n      }\n    } else if (scrollOffsetX.charAt(scrollOffsetX.length - 1) === '%') {\n      scrollOffsetX = (Number(scrollOffsetX.slice(0, -1)) / 100) * viewWidth\n    } else {\n      scrollOffsetX = Number(scrollOffsetX)\n    }\n  }\n\n  if (typeof scrollOffsetY === 'string') {\n    if (scrollOffsetY.startsWith('inner-')) {\n      if (scrollOffsetY.charAt(scrollOffsetY.length - 1) === '%') {\n        scrollOffsetY = ((Number(scrollOffsetY.slice(6, -1)) / 100) * (viewHeight - elementHeight))\n      } else {\n        scrollOffsetY = -Number(scrollOffsetY.slice(6))\n      }\n    } else if (scrollOffsetY.charAt(scrollOffsetY.length - 1) === '%') {\n      scrollOffsetY = (Number(scrollOffsetY.slice(0, -1)) / 100) * viewHeight\n    } else {\n      scrollOffsetY = Number(scrollOffsetY)\n    }\n  }\n\n  let scrollPointX = elementPosX - scrollOffsetX\n  let scrollPointY = elementPosY - scrollOffsetY\n\n  if (scrollPointX < 0) {\n    scrollPointX = 0\n  } else if (scrollPointX > maxScrollX) {\n    scrollPointX = maxScrollX\n  }\n\n  if (scrollPointY < 0) {\n    scrollPointY = 0\n  } else if (scrollPointY > maxScrollY) {\n    scrollPointY = maxScrollY\n  }\n\n  const scrollStartX = window.scrollX || window.pageXOffset\n  const scrollStartY = window.scrollY || window.pageYOffset\n  const duration = (opts.isOnLoad ? opts.scrollDurationOnLoad : opts.scrollDurationOnClick) ?? opts.scrollDuration\n  const easeFunc = (typeof opts.easingFunction === 'string' ? hashjump.easingFunctions[opts.easingFunction] : opts.easingFunction) ?? hashjump.easingFunctions.linear\n  const time = Date.now()\n  const requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame\n\n  const focusElement = () => {\n    if (\n      opts.focusElement &&\n      (\n        opts.focusElement === true ||\n        (typeof opts.focusElement === 'string' && element.matches(opts.focusElement)) ||\n        (typeof opts.focusElement === 'function' && opts.focusElement(element))\n      )\n    ) {\n      element.focus()\n    }\n  }\n\n  const step = () => {\n    const t = Math.min(1, (Date.now() - time) / duration)\n    const ease = easeFunc(t)\n    const posX = scrollStartX + (scrollPointX - scrollStartX) * ease\n    const posY = scrollStartY + (scrollPointY - scrollStartY) * ease\n\n    window.scrollTo(posX, posY)\n\n    if (t < 1) {\n      requestAnimationFrame(step)\n    } else {\n      focusElement()\n\n      if (opts.actionAfter) {\n        opts.actionAfter(actionInfo)\n      }\n    }\n  }\n\n  const actionInfo = {\n    target,\n    opts,\n    element,\n    viewWidth,\n    viewHeight,\n    pageWidth,\n    pageHeight,\n    maxScrollX,\n    maxScrollY,\n    elementPosX,\n    elementPosY,\n    elementWidth,\n    elementHeight,\n    scrollOffsetX,\n    scrollOffsetY,\n    scrollPointX,\n    scrollPointY,\n    scrollStartX,\n    scrollStartY,\n    duration,\n    easeFunc,\n    time,\n    requestAnimationFrame,\n    step,\n    focusElement\n  }\n\n  let actionBeforeResults\n\n  if (opts.actionBefore) {\n    actionBeforeResults = opts.actionBefore(actionInfo)\n  }\n\n  if (opts.action) {\n    if (actionBeforeResults !== false) {\n      opts.action(actionInfo)\n\n      if (opts.actionAfter) {\n        opts.actionAfter(actionInfo)\n      }\n    }\n  } else {\n    if (actionBeforeResults !== false) {\n      if (duration) {\n        requestAnimationFrame(step)\n      } else {\n        window.scrollTo(scrollPointX, scrollPointY)\n        focusElement()\n\n        if (opts.actionAfter) {\n          opts.actionAfter(actionInfo)\n        }\n      }\n    }\n  }\n}\n\nhashjump.defaultOpts = {\n  action: null,\n  actionAfter: null,\n  actionBefore: null,\n  focusElement: 'input, select, button, textarea',\n  hashjumpLinks: true,\n  hashjumpLinkEvents: ['click', 'keypress'],\n  hashjumpOnLoad: true,\n  hideUrlHash: false,\n  ignoreEmptyHashes: true,\n  scrollOffset: '25%',\n  scrollOffsetX: null,\n  scrollOffsetY: null,\n  scrollDuration: 200,\n  scrollDurationOnLoad: null,\n  scrollDurationOnClick: null,\n  easingFunction: 'linear'\n}\n\nhashjump.easingFunctions = {\n  linear: t => t,\n  easeInQuad: t => t * t,\n  easeOutQuad: t => t * (2 - t),\n  easeInOutQuad: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  easeInCubic: t => t * t * t,\n  easeOutCubic: t => (--t) * t * t + 1,\n  easeInOutCubic: t => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  easeInQuart: t => t * t * t * t,\n  easeOutQuart: t => 1 - (--t) * t * t * t,\n  easeInOutQuart: t => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t,\n  easeInQuint: t => t * t * t * t * t,\n  easeOutQuint: t => 1 + (--t) * t * t * t * t,\n  easeInOutQuint: t => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n}\n\nexport default hashjump\n"],"names":["hashjump","targetHashes","opts","_hashjump$opts","onLoadHash","window","location","hash","replace","_typeof","split","Object","assign","defaultOpts","hashjumpOnLoad","keys","includes","history","scrollRestoration","scrollTo","hideUrlHash","ignoreEmptyHashes","replaceState","pathname","addEventListener","to","isOnLoad","hashjumpLinks","query","map","join","_hashjump$opts2","hashLinks","document","querySelectorAll","forEach","link","hashjumpLinkEvents","eventType","e","linkHash","getAttribute","preventDefault","isOnClick","_hashjump$opts3","reduce","a","v","_objectSpread","_defineProperty","baseOpts","target","_ref","_ref2","_opts$scrollOffsetX","_opts$scrollOffsetY","_ref3","_ref4","element","HTMLElement","documentElement","getElementById","console","error","action","warn","id","viewWidth","Math","max","clientWidth","innerWidth","viewHeight","clientHeight","innerHeight","pageWidth","scrollWidth","pageHeight","scrollHeight","maxScrollX","maxScrollY","elementPosX","offsetLeft","elementPosY","offsetTop","elementWidth","offsetWidth","elementHeight","offsetHeight","scrollOffsetX","scrollOffset","scrollOffsetY","startsWith","charAt","length","Number","slice","scrollPointX","scrollPointY","scrollStartX","scrollX","pageXOffset","scrollStartY","scrollY","pageYOffset","duration","scrollDurationOnLoad","scrollDurationOnClick","scrollDuration","easeFunc","easingFunction","easingFunctions","linear","time","Date","now","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","focusElement","matches","focus","step","t","min","ease","posX","posY","actionAfter","actionInfo","actionBeforeResults","actionBefore","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACA;EACA;EACA;;AAEMA,MAAAA,SAAQ,GAAG,SAAXA,QAAQA,CAAIC,YAAY,EAAEC,IAAI,EAAK;EAAA,EAAA,IAAAC,cAAA;EACvC,EAAA,IAAMC,UAAU,GAAIC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAEC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;EAE1D,EAAA,IAAIC,OAAA,CAAOR,YAAY,CAAA,KAAK,QAAQ,EAAE;EACpCC,IAAAA,IAAI,GAAGD,YAAY;EACnBA,IAAAA,YAAY,GAAG,IAAI;EACrB,GAAC,MAAM,IAAI,OAAOA,YAAY,KAAK,QAAQ,EAAE;EAC3CA,IAAAA,YAAY,GAAGA,YAAY,CAACS,KAAK,CAAC,QAAQ,CAAC;EAC7C;IAEAR,IAAI,GAAGS,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEZ,SAAQ,CAACa,WAAW,EAAEX,IAAI,aAAJA,IAAI,KAAA,MAAA,GAAJA,IAAI,GAAI,EAAE,CAAC;EAE1D,EAAA,IACEA,IAAI,CAACY,cAAc,IACnBV,UAAU,KAEP,CAACH,YAAY,IAAI,CAACU,MAAM,CAACI,IAAI,CAAAZ,CAAAA,cAAA,GAACH,SAAQ,CAACE,IAAI,MAAAC,IAAAA,IAAAA,cAAA,KAAAA,MAAAA,GAAAA,cAAA,GAAI,EAAE,CAAC,CAACa,QAAQ,CAACZ,UAAU,CAAC,IACvEH,YAAY,IAAIA,YAAY,CAACe,QAAQ,CAACZ,UAAU,CAAE,CACpD,EACD;MACA,IAAI,mBAAmB,IAAIa,OAAO,EAAE;QAClCA,OAAO,CAACC,iBAAiB,GAAG,QAAQ;EACtC;EAEAb,IAAAA,MAAM,CAACc,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAErB,IAAIjB,IAAI,CAACkB,WAAW,IAAKlB,IAAI,CAACmB,iBAAiB,IAAI,CAACjB,UAAW,EAAE;EAC/Da,MAAAA,OAAO,CAACK,YAAY,CAAC,IAAI,EAAE,IAAI,EAAEjB,MAAM,CAACC,QAAQ,CAACiB,QAAQ,CAAC;EAC5D;EAEA,IAAA,IAAI,CAACrB,IAAI,CAACmB,iBAAiB,IAAIjB,UAAU,EAAE;EACzCC,MAAAA,MAAM,CAACmB,gBAAgB,CAAC,MAAM,EAAE,YAAM;UACpCxB,SAAQ,CAACyB,EAAE,CAACrB,UAAU,EAAEO,MAAM,CAACC,MAAM,CAAC;EAAEc,UAAAA,QAAQ,EAAE;WAAM,EAAExB,IAAI,CAAC,CAAC;EAClE,OAAC,CAAC;EACJ;EACF;IAEA,IAAIA,IAAI,CAACyB,aAAa,EAAE;EACtB,IAAA,IAAIC,KAAK;EAET,IAAA,IAAI3B,YAAY,EAAE;EAChB2B,MAAAA,KAAK,GAAG3B,YAAY,CAAC4B,GAAG,CAAC,UAAAtB,IAAI,EAAA;EAAA,QAAA,OAAI,WAAW,GAAGA,IAAI,GAAG,IAAI;EAAA,OAAA,CAAC,CAACuB,IAAI,CAAC,GAAG,CAAC;EACvE,KAAC,MAAM;EAAA,MAAA,IAAAC,eAAA;QACLH,KAAK,GAAG,cAAc,GAAGjB,MAAM,CAACI,IAAI,CAAAgB,CAAAA,eAAA,GAAC/B,SAAQ,CAACE,IAAI,cAAA6B,eAAA,KAAA,MAAA,GAAAA,eAAA,GAAI,EAAE,CAAC,CAACF,GAAG,CAAC,UAAAtB,IAAI,EAAA;EAAA,QAAA,OAAI,eAAe,GAAGA,IAAI,GAAG,KAAK;EAAA,OAAA,CAAC,CAACuB,IAAI,CAAC,EAAE,CAAC;EAChH;EAEA,IAAA,IAAME,SAAS,GAAGC,QAAQ,CAACC,gBAAgB,CAACN,KAAK,CAAC;EAElDI,IAAAA,SAAS,CAACG,OAAO,CAAC,UAAAC,IAAI,EAAI;EACxBlC,MAAAA,IAAI,CAACmC,kBAAkB,CAACF,OAAO,CAAC,UAAAG,SAAS,EAAI;EAC3CF,QAAAA,IAAI,CAACZ,gBAAgB,CAACc,SAAS,EAAE,UAAAC,CAAC,EAAI;EACpC,UAAA,IAAMC,QAAQ,GAAGJ,IAAI,CAACK,YAAY,CAAC,MAAM,CAAC,CAACjC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;YAE3D,IAAIN,IAAI,CAACkB,WAAW,IAAKlB,IAAI,CAACmB,iBAAiB,IAAI,CAACmB,QAAS,EAAE;cAC7DD,CAAC,CAACG,cAAc,EAAE;EAClBzB,YAAAA,OAAO,CAACK,YAAY,CAAC,IAAI,EAAE,IAAI,EAAEjB,MAAM,CAACC,QAAQ,CAACiB,QAAQ,CAAC;EAC5D;EAEA,UAAA,IAAI,CAACrB,IAAI,CAACmB,iBAAiB,IAAImB,QAAQ,EAAE;cACvCxC,SAAQ,CAACyB,EAAE,CAACe,QAAQ,EAAE7B,MAAM,CAACC,MAAM,CAAC;EAAE+B,cAAAA,SAAS,EAAE;eAAM,EAAEzC,IAAI,CAAC,CAAC;EACjE;EACF,SAAC,CAAC;EACJ,OAAC,CAAC;EACJ,KAAC,CAAC;EACJ;EAEA,EAAA,IAAID,YAAY,EAAE;EAAA,IAAA,IAAA2C,eAAA;MAChB5C,SAAQ,CAACE,IAAI,GAAGS,MAAM,CAACC,MAAM,CAAA,CAAAgC,eAAA,GAAC5C,SAAQ,CAACE,IAAI,MAAA,IAAA,IAAA0C,eAAA,KAAA,MAAA,GAAAA,eAAA,GAAI,EAAE,EAAE3C,YAAY,CAAC4C,MAAM,CAAC,UAACC,CAAC,EAAEC,CAAC,EAAA;QAAA,OAAAC,cAAA,CAAAA,cAAA,CAAWF,EAAAA,EAAAA,CAAC,OAAAG,eAAA,CAAA,EAAA,EAAGF,CAAC,EAAG7C,IAAI,CAAA,CAAA;EAAA,KAAG,EAAE,EAAE,CAAC,CAAC;EAC9G,GAAC,MAAM;MACLF,SAAQ,CAACkD,QAAQ,GAAGhD,IAAI;EAC1B;EACF;EAEAF,SAAQ,CAACyB,EAAE,GAAG,UAAC0B,MAAM,EAAEjD,IAAI,EAAK;IAAA,IAAAkD,IAAA,EAAAC,KAAA,EAAAC,mBAAA,EAAAC,mBAAA,EAAAC,KAAA,EAAAC,KAAA;EAC9B,EAAA,IAAIC,OAAO;IAEX,IAAIjD,OAAA,CAAO0C,MAAM,CAAK,KAAA,QAAQ,IAAI,EAAEA,MAAM,YAAYQ,WAAW,CAAC,EAAE;EAClEzD,IAAAA,IAAI,GAAGiD,MAAM;EACbA,IAAAA,MAAM,GAAG,IAAI;EACf;IAEA,IAAI,CAACA,MAAM,EAAE;MACXO,OAAO,GAAGzB,QAAQ,CAAC2B,eAAe;EACpC,GAAC,MAAM,IAAIT,MAAM,YAAYQ,WAAW,EAAE;EACxCD,IAAAA,OAAO,GAAGP,MAAM;EAClB,GAAC,MAAM,IAAI,OAAOA,MAAM,KAAK,QAAQ,EAAE;EACrCO,IAAAA,OAAO,GAAGzB,QAAQ,CAAC4B,cAAc,CAACV,MAAM,CAAC;EAC3C,GAAC,MAAM;EACLW,IAAAA,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEZ,MAAM,CAAC;EACnD,IAAA;EACF;IAEA,IAAI,CAACO,OAAO,EAAE;MACZ,IAAIxD,IAAI,CAAC8D,MAAM,EAAE;QACfN,OAAO,GAAGzB,QAAQ,CAAC2B,eAAe;EACpC,KAAC,MAAM;EACLE,MAAAA,OAAO,CAACG,IAAI,CAAC,oCAAoC,EAAEd,MAAM,CAAC;EAC1D,MAAA;EACF;EACF;IAEA,IAAMe,EAAE,GAAG,OAAOf,MAAM,KAAK,QAAQ,GAAGA,MAAM,GAAGO,OAAO,CAACQ,EAAE;IAE3DhE,IAAI,GAAGS,MAAM,CAACC,MAAM,CAAC,EAAE,EAAAwC,CAAAA,IAAA,GAAAC,CAAAA,KAAA,GAAGrD,SAAQ,CAACE,IAAI,GAAGF,SAAQ,CAACE,IAAI,CAACgE,EAAE,CAAC,GAAG,IAAI,cAAAb,KAAA,KAAA,MAAA,GAAAA,KAAA,GAAKrD,SAAQ,CAACkD,QAAQ,MAAA,IAAA,IAAAE,IAAA,KAAA,MAAA,GAAAA,IAAA,GAAIpD,SAAQ,CAACa,WAAW,EAAEX,IAAI,KAAJA,IAAAA,IAAAA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC;EAE7H,EAAA,IAAMiE,SAAS,GAAGC,IAAI,CAACC,GAAG,CAACpC,QAAQ,CAAC2B,eAAe,CAACU,WAAW,IAAI,CAAC,EAAEjE,MAAM,CAACkE,UAAU,IAAI,CAAC,CAAC;EAC7F,EAAA,IAAMC,UAAU,GAAGJ,IAAI,CAACC,GAAG,CAACpC,QAAQ,CAAC2B,eAAe,CAACa,YAAY,IAAI,CAAC,EAAEpE,MAAM,CAACqE,WAAW,IAAI,CAAC,CAAC;EAChG,EAAA,IAAMC,SAAS,GAAG1C,QAAQ,CAAC2B,eAAe,CAACgB,WAAW;EACtD,EAAA,IAAMC,UAAU,GAAG5C,QAAQ,CAAC2B,eAAe,CAACkB,YAAY;EACxD,EAAA,IAAMC,UAAU,GAAGJ,SAAS,GAAGR,SAAS;EACxC,EAAA,IAAMa,UAAU,GAAGH,UAAU,GAAGL,UAAU;EAC1C,EAAA,IAAMS,WAAW,GAAGvB,OAAO,CAACwB,UAAU;EACtC,EAAA,IAAMC,WAAW,GAAGzB,OAAO,CAAC0B,SAAS;EACrC,EAAA,IAAMC,YAAY,GAAG3B,OAAO,CAAC4B,WAAW;EACxC,EAAA,IAAMC,aAAa,GAAG7B,OAAO,CAAC8B,YAAY;EAE1C,EAAA,IAAIC,aAAa,GAAA,CAAAnC,mBAAA,GAAGpD,IAAI,CAACuF,aAAa,MAAAnC,IAAAA,IAAAA,mBAAA,KAAAA,MAAAA,GAAAA,mBAAA,GAAIpD,IAAI,CAACwF,YAAY;EAC3D,EAAA,IAAIC,aAAa,GAAA,CAAApC,mBAAA,GAAGrD,IAAI,CAACyF,aAAa,MAAApC,IAAAA,IAAAA,mBAAA,KAAAA,MAAAA,GAAAA,mBAAA,GAAIrD,IAAI,CAACwF,YAAY;EAE3D,EAAA,IAAI,OAAOD,aAAa,KAAK,QAAQ,EAAE;EACrC,IAAA,IAAIA,aAAa,CAACG,UAAU,CAAC,QAAQ,CAAC,EAAE;EACtC,MAAA,IAAIH,aAAa,CAACI,MAAM,CAACJ,aAAa,CAACK,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;EAC1DL,QAAAA,aAAa,GAAKM,MAAM,CAACN,aAAa,CAACO,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,IAAK7B,SAAS,GAAGkB,YAAY,CAAE;EAC3F,OAAC,MAAM;UACLI,aAAa,GAAG,CAACM,MAAM,CAACN,aAAa,CAACO,KAAK,CAAC,CAAC,CAAC,CAAC;EACjD;EACF,KAAC,MAAM,IAAIP,aAAa,CAACI,MAAM,CAACJ,aAAa,CAACK,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;EACjEL,MAAAA,aAAa,GAAIM,MAAM,CAACN,aAAa,CAACO,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,GAAI7B,SAAS;EACxE,KAAC,MAAM;EACLsB,MAAAA,aAAa,GAAGM,MAAM,CAACN,aAAa,CAAC;EACvC;EACF;EAEA,EAAA,IAAI,OAAOE,aAAa,KAAK,QAAQ,EAAE;EACrC,IAAA,IAAIA,aAAa,CAACC,UAAU,CAAC,QAAQ,CAAC,EAAE;EACtC,MAAA,IAAID,aAAa,CAACE,MAAM,CAACF,aAAa,CAACG,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;EAC1DH,QAAAA,aAAa,GAAKI,MAAM,CAACJ,aAAa,CAACK,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,IAAKxB,UAAU,GAAGe,aAAa,CAAE;EAC7F,OAAC,MAAM;UACLI,aAAa,GAAG,CAACI,MAAM,CAACJ,aAAa,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC;EACjD;EACF,KAAC,MAAM,IAAIL,aAAa,CAACE,MAAM,CAACF,aAAa,CAACG,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;EACjEH,MAAAA,aAAa,GAAII,MAAM,CAACJ,aAAa,CAACK,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,GAAIxB,UAAU;EACzE,KAAC,MAAM;EACLmB,MAAAA,aAAa,GAAGI,MAAM,CAACJ,aAAa,CAAC;EACvC;EACF;EAEA,EAAA,IAAIM,YAAY,GAAGhB,WAAW,GAAGQ,aAAa;EAC9C,EAAA,IAAIS,YAAY,GAAGf,WAAW,GAAGQ,aAAa;IAE9C,IAAIM,YAAY,GAAG,CAAC,EAAE;EACpBA,IAAAA,YAAY,GAAG,CAAC;EAClB,GAAC,MAAM,IAAIA,YAAY,GAAGlB,UAAU,EAAE;EACpCkB,IAAAA,YAAY,GAAGlB,UAAU;EAC3B;IAEA,IAAImB,YAAY,GAAG,CAAC,EAAE;EACpBA,IAAAA,YAAY,GAAG,CAAC;EAClB,GAAC,MAAM,IAAIA,YAAY,GAAGlB,UAAU,EAAE;EACpCkB,IAAAA,YAAY,GAAGlB,UAAU;EAC3B;IAEA,IAAMmB,YAAY,GAAG9F,MAAM,CAAC+F,OAAO,IAAI/F,MAAM,CAACgG,WAAW;IACzD,IAAMC,YAAY,GAAGjG,MAAM,CAACkG,OAAO,IAAIlG,MAAM,CAACmG,WAAW;IACzD,IAAMC,QAAQ,IAAAjD,KAAA,GAAItD,IAAI,CAACwB,QAAQ,GAAGxB,IAAI,CAACwG,oBAAoB,GAAGxG,IAAI,CAACyG,qBAAqB,MAAAnD,IAAAA,IAAAA,KAAA,cAAAA,KAAA,GAAKtD,IAAI,CAAC0G,cAAc;EAChH,EAAA,IAAMC,QAAQ,GAAA,CAAApD,KAAA,GAAI,OAAOvD,IAAI,CAAC4G,cAAc,KAAK,QAAQ,GAAG9G,SAAQ,CAAC+G,eAAe,CAAC7G,IAAI,CAAC4G,cAAc,CAAC,GAAG5G,IAAI,CAAC4G,cAAc,MAAArD,IAAAA,IAAAA,KAAA,KAAAA,MAAAA,GAAAA,KAAA,GAAKzD,SAAQ,CAAC+G,eAAe,CAACC,MAAM;EACnK,EAAA,IAAMC,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE;IACvB,IAAMC,qBAAqB,GAAG/G,MAAM,CAAC+G,qBAAqB,IAAI/G,MAAM,CAACgH,2BAA2B,IAAIhH,MAAM,CAACiH,wBAAwB,IAAIjH,MAAM,CAACkH,sBAAsB,IAAIlH,MAAM,CAACmH,uBAAuB;EAEtM,EAAA,IAAMC,YAAY,GAAG,SAAfA,YAAYA,GAAS;EACzB,IAAA,IACEvH,IAAI,CAACuH,YAAY,KAEfvH,IAAI,CAACuH,YAAY,KAAK,IAAI,IACzB,OAAOvH,IAAI,CAACuH,YAAY,KAAK,QAAQ,IAAI/D,OAAO,CAACgE,OAAO,CAACxH,IAAI,CAACuH,YAAY,CAAE,IAC5E,OAAOvH,IAAI,CAACuH,YAAY,KAAK,UAAU,IAAIvH,IAAI,CAACuH,YAAY,CAAC/D,OAAO,CAAE,CACxE,EACD;QACAA,OAAO,CAACiE,KAAK,EAAE;EACjB;KACD;EAED,EAAA,IAAMC,KAAI,GAAG,SAAPA,IAAIA,GAAS;EACjB,IAAA,IAAMC,CAAC,GAAGzD,IAAI,CAAC0D,GAAG,CAAC,CAAC,EAAE,CAACZ,IAAI,CAACC,GAAG,EAAE,GAAGF,IAAI,IAAIR,QAAQ,CAAC;EACrD,IAAA,IAAMsB,IAAI,GAAGlB,QAAQ,CAACgB,CAAC,CAAC;MACxB,IAAMG,IAAI,GAAG7B,YAAY,GAAG,CAACF,YAAY,GAAGE,YAAY,IAAI4B,IAAI;MAChE,IAAME,IAAI,GAAG3B,YAAY,GAAG,CAACJ,YAAY,GAAGI,YAAY,IAAIyB,IAAI;EAEhE1H,IAAAA,MAAM,CAACc,QAAQ,CAAC6G,IAAI,EAAEC,IAAI,CAAC;MAE3B,IAAIJ,CAAC,GAAG,CAAC,EAAE;QACTT,qBAAqB,CAACQ,KAAI,CAAC;EAC7B,KAAC,MAAM;EACLH,MAAAA,YAAY,EAAE;QAEd,IAAIvH,IAAI,CAACgI,WAAW,EAAE;EACpBhI,QAAAA,IAAI,CAACgI,WAAW,CAACC,UAAU,CAAC;EAC9B;EACF;KACD;EAED,EAAA,IAAMA,UAAU,GAAG;EACjBhF,IAAAA,MAAM,EAANA,MAAM;EACNjD,IAAAA,IAAI,EAAJA,IAAI;EACJwD,IAAAA,OAAO,EAAPA,OAAO;EACPS,IAAAA,SAAS,EAATA,SAAS;EACTK,IAAAA,UAAU,EAAVA,UAAU;EACVG,IAAAA,SAAS,EAATA,SAAS;EACTE,IAAAA,UAAU,EAAVA,UAAU;EACVE,IAAAA,UAAU,EAAVA,UAAU;EACVC,IAAAA,UAAU,EAAVA,UAAU;EACVC,IAAAA,WAAW,EAAXA,WAAW;EACXE,IAAAA,WAAW,EAAXA,WAAW;EACXE,IAAAA,YAAY,EAAZA,YAAY;EACZE,IAAAA,aAAa,EAAbA,aAAa;EACbE,IAAAA,aAAa,EAAbA,aAAa;EACbE,IAAAA,aAAa,EAAbA,aAAa;EACbM,IAAAA,YAAY,EAAZA,YAAY;EACZC,IAAAA,YAAY,EAAZA,YAAY;EACZC,IAAAA,YAAY,EAAZA,YAAY;EACZG,IAAAA,YAAY,EAAZA,YAAY;EACZG,IAAAA,QAAQ,EAARA,QAAQ;EACRI,IAAAA,QAAQ,EAARA,QAAQ;EACRI,IAAAA,IAAI,EAAJA,IAAI;EACJG,IAAAA,qBAAqB,EAArBA,qBAAqB;EACrBQ,IAAAA,IAAI,EAAJA,KAAI;EACJH,IAAAA,YAAY,EAAZA;KACD;EAED,EAAA,IAAIW,mBAAmB;IAEvB,IAAIlI,IAAI,CAACmI,YAAY,EAAE;EACrBD,IAAAA,mBAAmB,GAAGlI,IAAI,CAACmI,YAAY,CAACF,UAAU,CAAC;EACrD;IAEA,IAAIjI,IAAI,CAAC8D,MAAM,EAAE;MACf,IAAIoE,mBAAmB,KAAK,KAAK,EAAE;EACjClI,MAAAA,IAAI,CAAC8D,MAAM,CAACmE,UAAU,CAAC;QAEvB,IAAIjI,IAAI,CAACgI,WAAW,EAAE;EACpBhI,QAAAA,IAAI,CAACgI,WAAW,CAACC,UAAU,CAAC;EAC9B;EACF;EACF,GAAC,MAAM;MACL,IAAIC,mBAAmB,KAAK,KAAK,EAAE;EACjC,MAAA,IAAI3B,QAAQ,EAAE;UACZW,qBAAqB,CAACQ,KAAI,CAAC;EAC7B,OAAC,MAAM;EACLvH,QAAAA,MAAM,CAACc,QAAQ,CAAC8E,YAAY,EAAEC,YAAY,CAAC;EAC3CuB,QAAAA,YAAY,EAAE;UAEd,IAAIvH,IAAI,CAACgI,WAAW,EAAE;EACpBhI,UAAAA,IAAI,CAACgI,WAAW,CAACC,UAAU,CAAC;EAC9B;EACF;EACF;EACF;EACF,CAAC;EAEDnI,SAAQ,CAACa,WAAW,GAAG;EACrBmD,EAAAA,MAAM,EAAE,IAAI;EACZkE,EAAAA,WAAW,EAAE,IAAI;EACjBG,EAAAA,YAAY,EAAE,IAAI;EAClBZ,EAAAA,YAAY,EAAE,iCAAiC;EAC/C9F,EAAAA,aAAa,EAAE,IAAI;EACnBU,EAAAA,kBAAkB,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;EACzCvB,EAAAA,cAAc,EAAE,IAAI;EACpBM,EAAAA,WAAW,EAAE,KAAK;EAClBC,EAAAA,iBAAiB,EAAE,IAAI;EACvBqE,EAAAA,YAAY,EAAE,KAAK;EACnBD,EAAAA,aAAa,EAAE,IAAI;EACnBE,EAAAA,aAAa,EAAE,IAAI;EACnBiB,EAAAA,cAAc,EAAE,GAAG;EACnBF,EAAAA,oBAAoB,EAAE,IAAI;EAC1BC,EAAAA,qBAAqB,EAAE,IAAI;EAC3BG,EAAAA,cAAc,EAAE;EAClB,CAAC;EAED9G,SAAQ,CAAC+G,eAAe,GAAG;EACzBC,EAAAA,MAAM,EAAE,SAARA,MAAMA,CAAEa,CAAC,EAAA;EAAA,IAAA,OAAIA,CAAC;EAAA,GAAA;EACdS,EAAAA,UAAU,EAAE,SAAZA,UAAUA,CAAET,CAAC,EAAA;MAAA,OAAIA,CAAC,GAAGA,CAAC;EAAA,GAAA;EACtBU,EAAAA,WAAW,EAAE,SAAbA,WAAWA,CAAEV,CAAC,EAAA;EAAA,IAAA,OAAIA,CAAC,IAAI,CAAC,GAAGA,CAAC,CAAC;EAAA,GAAA;EAC7BW,EAAAA,aAAa,EAAE,SAAfA,aAAaA,CAAEX,CAAC,EAAA;MAAA,OAAIA,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAGA,CAAC,IAAIA,CAAC;EAAA,GAAA;EAC9DY,EAAAA,WAAW,EAAE,SAAbA,WAAWA,CAAEZ,CAAC,EAAA;EAAA,IAAA,OAAIA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA,GAAA;EAC3Ba,EAAAA,YAAY,EAAE,SAAdA,YAAYA,CAAEb,CAAC,EAAA;EAAA,IAAA,OAAK,EAAEA,CAAC,GAAIA,CAAC,GAAGA,CAAC,GAAG,CAAC;EAAA,GAAA;EACpCc,EAAAA,cAAc,EAAE,SAAhBA,cAAcA,CAAEd,CAAC,EAAA;EAAA,IAAA,OAAIA,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAACA,CAAC,GAAG,CAAC,KAAK,CAAC,GAAGA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAGA,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;EAAA,GAAA;EACtFe,EAAAA,WAAW,EAAE,SAAbA,WAAWA,CAAEf,CAAC,EAAA;EAAA,IAAA,OAAIA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA,GAAA;EAC/BgB,EAAAA,YAAY,EAAE,SAAdA,YAAYA,CAAEhB,CAAC,EAAA;MAAA,OAAI,CAAC,GAAI,EAAEA,CAAC,GAAIA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA,GAAA;EACxCiB,EAAAA,cAAc,EAAE,SAAhBA,cAAcA,CAAEjB,CAAC,EAAA;MAAA,OAAIA,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,CAAC,GAAI,EAAEA,CAAE,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA,GAAA;EAC5EkB,EAAAA,WAAW,EAAE,SAAbA,WAAWA,CAAElB,CAAC,EAAA;MAAA,OAAIA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA,GAAA;EACnCmB,EAAAA,YAAY,EAAE,SAAdA,YAAYA,CAAEnB,CAAC,EAAA;MAAA,OAAI,CAAC,GAAI,EAAEA,CAAC,GAAIA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA,GAAA;EAC5CoB,EAAAA,cAAc,EAAE,SAAhBA,cAAcA,CAAEpB,CAAC,EAAA;EAAA,IAAA,OAAIA,CAAC,GAAG,GAAG,GAAG,EAAE,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,EAAE,GAAI,EAAEA,CAAE,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC;EAAA;EACxF,CAAC;;;;;;;;"}